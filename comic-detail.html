<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Retro Multiverse - Comic Detail</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="page">

    <header>
      <h1>RETRO MULTIVERSE</h1>
      <div class="marquee"><span>Rare Comics â€¢ Retro Games â€¢ Mystery Boxes</span></div>
      <div class="cart-icon" onclick="window.location.href='cart.html'">
        ğŸ›’ Cart <span class="cart-count">0</span>
      </div>
    </header>

    <nav class="menu">
      <a href="index.html">HOME</a>
      <a href="comics.html">COMICS</a>
      <a href="retro.html">RETRO GAMES</a>
      <a href="mystery.html">MYSTERY BOX</a>
      <a href="#contact-section">CONTACT</a>
    </nav>

    <main>
      <section class="comic-detail">
        <h2 id="comic-title"></h2>
        <div class="comic-images">
          <img id="main-img" src="" alt="">
        </div>
        <div class="comic-thumbs">
          <img class="thumb" src="" alt="">
          <img class="thumb" src="" alt="">
        </div>
        <p class="comic-price" id="comic-price"></p>
        <button class="add-to-cart-btn">Add to Cart</button>
        <p class="comic-desc" id="comic-desc"></p>
      </section>
    </main>

    <section id="contact-section">
      <div class="contact-box">
        <h2>Contact Me</h2>
        <p>Email: example@mail.com</p>
        <p>Instagram: @yourhandle</p>
        <p>TikTok: @yourtiktok</p>
      </div>
    </section>

    <footer>
      <p>RETRO MULTIVERSE - ALL RIGHTS RESERVED Â©</p>
    </footer>

  </div>

  <script>
  // ----------------------
  // ALL COMICS DATA
  // ----------------------
  const comics = {
    tasm800: {
      title: "The Amazing Spider-Man #800 Variant Edition",
      images: [
        "images/comics/TASM issue 800 variant edition 1.jpg",
        "images/comics/TASM issue 800 variant edition 2.jpg",
        "images/comics/TASM issue 800 variant edition 3.jpg"
      ],
      price: "12.99",
      desc: "Special variant edition of Spider-Man #800 with exclusive cover art."
    },
    batman500: {
      title: "Batman #500",
      images: [
        "images/comics/Batman issue 500 1.jpg",
        "images/comics/Batman issue 500 2.jpg",
        "images/comics/Batman issue 500 3.jpg"
      ],
      price: "15.50",
      desc: "Classic Batman issue #500 featuring key storyline."
    },
    moonknight20: {
      title: "Moonknight #20",
      images: [
        "images/comics/Moonknight issue 20 1.jpg",
        "images/comics/Moonknight issue 20 2.jpg",
        "images/comics/Moonknight issue 20 3.jpg"
      ],
      price: "10.00",
      desc: "Moonknight issue #20 with a thrilling plot twist."
    }
  };

  // ----------------------
  // GET COMIC ID FROM URL
  // ----------------------
  const params = new URLSearchParams(window.location.search);
  const comicId = params.get('id');

  if (!comics[comicId]) {
    document.querySelector(".comic-detail").innerHTML = "<p>Comic not found.</p>";
  } else {
    const comic = comics[comicId];

    // Populate the page
    document.getElementById("comic-title").textContent = comic.title;
    document.getElementById("main-img").src = comic.images[0];
    document.getElementById("main-img").alt = comic.title;
    document.getElementById("comic-price").textContent = "â‚¬" + comic.price;
    document.getElementById("comic-desc").textContent = comic.desc;

    // Thumbnails
    const thumbs = document.querySelectorAll(".comic-thumbs .thumb");
    thumbs.forEach((thumb, index) => {
      if(comic.images[index + 1]) {
        thumb.src = comic.images[index + 1];
        thumb.alt = comic.title + " " + (index + 2);
        thumb.addEventListener("click", () => {
          document.getElementById("main-img").src = comic.images[index + 1];
        });
      } else {
        thumb.style.display = "none";
      }
    });

    // Add to Cart Button
    const addBtn = document.querySelector(".add-to-cart-btn");
    if (addBtn) {
      addBtn.addEventListener("click", () => {
        addToCart({
          title: comic.title,
          price: parseFloat(comic.price),
          img: comic.images[0]
        });
      });
    }
  }

  // ----------------------
  // CART SYSTEM
  // ----------------------
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  function addToCart(item) {
    cart.push(item);
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    showCartPopup(item.title);
  }

  function updateCartCount() {
    const cartCountElems = document.querySelectorAll('.cart-count');
    cartCountElems.forEach(span => span.textContent = cart.length);
  }
  updateCartCount();

  function showCartPopup(title) {
    const popup = document.createElement("div");
    popup.className = "cart-popup";
    popup.innerHTML = `
      <div class="cart-popup-box">
        <h3>âœ” Î¤Î¿ Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎ±Ï„Îµ ÏƒÏ„Î¿ ÎºÎ±Î»Î¬Î¸Î¹!</h3>
        <p><strong>${title}</strong></p>
        <div class="popup-buttons">
          <button id="continueBtn">Î£Ï…Î½Î­Ï‡ÎµÎ¹Î± ÏƒÏ„Î¿ Shop</button>
          <button id="goToCartBtn">ÎœÎµÏ„Î¬Î²Î±ÏƒÎ· ÏƒÏ„Î¿ ÎšÎ±Î»Î¬Î¸Î¹</button>
        </div>
      </div>
    `;
    document.body.appendChild(popup);

    document.getElementById("continueBtn").onclick = () => popup.remove();
    document.getElementById("goToCartBtn").onclick = () => window.location.href = "cart.html";
  }
  </script>

</body>
</html>
